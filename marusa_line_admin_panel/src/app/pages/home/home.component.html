<div class="shops-container">
    <div class="header-align">
        <div class="shop-card shop-card-add" (click)="revertShopSearch()">
            <b>
                <i class="fas fa-shop"></i>
                <b style="color: white;">{{shopsList.length}}</b>
            </b>
        </div>
        <div class="shop-card shop-card-add" [routerLink]="AppRoutes.addShop">
            <b>
                <i class="fas fa-plus"></i>
            </b>
        </div>
        <div class="shop-card shop-card-add" >
            <b>
                <input type="text" class="search-input" [(ngModel)]="shopSearchText"  (keyup.enter)="searchShop()">
                <i class="fas fa-search" (click)="searchShop()"></i>
            </b>
        </div>
    </div>
  <div class="shops-grid">
    <div class="shop-card" *ngFor="let shop of shopsList" >
      <div class="shop-payment">
        <div class="payment-icons" >
          <span  class="payment-badge" [ngClass]="{'nosub':shop.subscription == '','minimal':shop.subscription == 'მინიმალური',}" (click)="showModal(shop.id)">
            <b style="display: flex; gap: 10px; align-items: center;">
                <p>
                    <i class="fas fa-close" style="color: red;" *ngIf="!shop.subscription"> </i>
                </p>
                {{shop.subscription}}
                <i class="fas fa-crown" style="color: yellow;text-shadow: 0px 0px 1px black;; font-size: 22px;" *ngIf="shop.subscription=='პრემიუმი'"> </i>
            </b>
          </span>
        </div>
      </div>
        <div class="shop-logo-cotnainer-align" [routerLink]="AppRoutes.shopDetails+ shop.id">
            <div class="shop-logo-container" >
              <img 
                *ngIf="shop.logo" 
                [src]="shop.logo" 
                [alt]="shop.name" 
                class="shop-logo"
              />
              <div *ngIf="!shop.logo" class="shop-logo-placeholder">
                {{ shop.name.charAt(0).toUpperCase() }}
              </div>
            </div>
        </div>
      
      <div class="shop-info" [routerLink]="AppRoutes.shopDetails+ shop.id">
        <h2 class="shop-name">{{ shop.name }}</h2>
        <p class="shop-email">
          <i class="fas fa-envelope"></i>
          {{ shop.gmail }}
        </p>
      </div>
      
      <div class="shop-social">
        <a 
          *ngIf="shop.instagram" 
          [href]="shop.instagram" 
          target="_blank" 
          class="social-link instagram"
          (click)="$event.stopPropagation()"
        >
          <i class="fab fa-instagram"></i>
          INSTAGRAM
        </a>
        
        <a 
          *ngIf="shop.facebook" 
          [href]="shop.facebook" 
          target="_blank" 
          class="social-link facebook"
          (click)="$event.stopPropagation()"
        >
          <i class="fab fa-facebook"></i>
          FACEBOOK
        </a>
        
        <a 
          *ngIf="shop.titkok" 
          [href]="shop.titkok" 
          target="_blank" 
          class="social-link tiktok"
          (click)="$event.stopPropagation()"
        >
          <i class="fab fa-tiktok"></i>
          TIKTOK
        </a>
      </div>
    </div>
  </div>
  
  <div *ngIf="shopsList.length === 0" class="empty-state">
    <i class="fas fa-store-slash"></i>
    <p>მაღაზიები არ მოიძებნა</p>
  </div>
</div>


<div class="modal-align" *ngIf="modalVisible">
    <div class="modal-cancel" (click)="hideModal()"></div>
    <div class="modal">
        <div class="button-group" >
            <button class="sub-button" value="მინიმალური" [ngClass]="{'chosen-sub':openedShop.subscription==''}" (click)="addSubscription('')"><i class="fas fa-close" style="color: red;"></i></button>
            <button class="sub-button" value="მინიმალური" [ngClass]="{'chosen-sub':openedShop.subscription=='მინიმალური'}" (click)="addSubscription('მინიმალური')">მინიმალური</button>
            <button class="sub-button" value="პრემიუმი" [ngClass]="{'chosen-sub':openedShop.subscription=='პრემიუმი'}" (click)="addSubscription('პრემიუმი')">პრემიუმი</button>
        </div>
    </div>
</div>